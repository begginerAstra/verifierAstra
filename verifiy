-- Sistema de Key + HWID da Astra

-- URLs
local keysURL = "https://raw.githubusercontent.com/begginerAstra/mykeys/main/keys.lua"
local scriptURL = "https://raw.githubusercontent.com/begginerAstra/orbtScript/refs/heads/main/orbtFull"

-- ServiÃ§os
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local RbxAnalytics = game:GetService("RbxAnalyticsService")
local player = Players.LocalPlayer
local clientId = RbxAnalytics:GetClientId()

-- VariÃ¡veis
local attempts = 0
local maxAttempts = 3

-- GUI
local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "KeySystem"

local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0, 400, 0, 230)
main.Position = UDim2.new(0.5, -200, 0.5, -115)
main.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
main.BorderSizePixel = 0
main.BackgroundTransparency = 0.1
main.AnchorPoint = Vector2.new(0.5, 0.5)
main:TweenSize(UDim2.new(0, 420, 0, 240), "Out", "Bounce", 0.5)

local logo = Instance.new("TextLabel", main)
logo.Size = UDim2.new(0, 420, 0, 40)
logo.Position = UDim2.new(0, 0, 0, -40)
logo.Text = "ğŸ…°ï¸ Astra Key System"
logo.TextColor3 = Color3.fromRGB(255, 255, 255)
logo.Font = Enum.Font.GothamBlack
logo.TextScaled = true
logo.BackgroundTransparency = 1

local textbox = Instance.new("TextBox", main)
textbox.Size = UDim2.new(0, 360, 0, 40)
textbox.Position = UDim2.new(0.5, -180, 0, 60)
textbox.PlaceholderText = "Digite sua key aqui..."
textbox.Text = ""
textbox.Font = Enum.Font.Gotham
textbox.TextScaled = true
textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
textbox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
textbox.BorderSizePixel = 0

local validate = Instance.new("TextButton", main)
validate.Size = UDim2.new(0, 360, 0, 40)
validate.Position = UDim2.new(0.5, -180, 0, 110)
validate.Text = "VALIDAR KEY"
validate.Font = Enum.Font.GothamBlack
validate.TextScaled = true
validate.BackgroundColor3 = Color3.fromRGB(0, 170, 127)
validate.TextColor3 = Color3.fromRGB(255, 255, 255)
validate.BorderSizePixel = 0

local result = Instance.new("TextLabel", main)
result.Size = UDim2.new(0, 360, 0, 30)
result.Position = UDim2.new(0.5, -180, 0, 160)
result.Font = Enum.Font.Gotham
result.TextScaled = true
result.TextColor3 = Color3.fromRGB(255, 255, 255)
result.Text = ""
result.BackgroundTransparency = 1

local close = Instance.new("TextButton", main)
close.Size = UDim2.new(0, 30, 0, 30)
close.Position = UDim2.new(1, -35, 0, 5)
close.Text = "X"
close.Font = Enum.Font.GothamBold
close.TextScaled = true
close.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
close.TextColor3 = Color3.new(1, 1, 1)
close.MouseButton1Click:Connect(function()
	gui:Destroy()
end)

-- Sons
local successSound = Instance.new("Sound", gui)
successSound.SoundId = "rbxassetid://6026984224"
successSound.Volume = 1

local errorSound = Instance.new("Sound", gui)
errorSound.SoundId = "rbxassetid://5419098676"
errorSound.Volume = 1

-- ValidaÃ§Ã£o
validate.MouseButton1Click:Connect(function()
	local inputKey = textbox.Text

	if inputKey == "" then
		result.Text = "Digite uma key."
		result.TextColor3 = Color3.fromRGB(255, 100, 100)
		errorSound:Play()
		return
	end

	result.Text = "Verificando..."
	result.TextColor3 = Color3.fromRGB(255, 255, 0)

	local success, response = pcall(function()
		return game:HttpGet(keysURL)
	end)

	if not success or not response then
		result.Text = "Erro ao buscar as keys."
		result.TextColor3 = Color3.fromRGB(255, 0, 0)
		errorSound:Play()
		return
	end

	local keyList
	local ok, err = pcall(function()
		keyList = loadstring(response)()
	end)

	if not ok or not keyList then
		result.Text = "Erro ao interpretar os dados das keys."
		result.TextColor3 = Color3.fromRGB(255, 0, 0)
		errorSound:Play()
		warn("Erro ao interpretar o arquivo de keys: " .. tostring(err))
		return
	end

	local valid = false
	for _, entry in ipairs(keyList) do
		if entry.Key == inputKey and entry.Hwid == clientId then
			valid = true
			break
		end
	end

	if valid then
		result.Text = "âœ… Key e HWID vÃ¡lidos!"
		result.TextColor3 = Color3.fromRGB(0, 255, 127)
		successSound:Play()

		local tween = TweenService:Create(main, TweenInfo.new(0.4), {
			Size = UDim2.new(0, 0, 0, 0),
			Position = UDim2.new(0.5, 0, 0.5, 0)
		})
		tween:Play()
		tween.Completed:Connect(function()
			gui:Destroy()
			loadstring(game:HttpGet(scriptURL))()
		end)
	else
		attempts += 1
		result.Text = "âŒ Key invÃ¡lida ou HWID incorreto!"
		result.TextColor3 = Color3.fromRGB(255, 50, 50)
		errorSound:Play()

		if attempts >= maxAttempts then
			wait(1)
			player:Kick("VocÃª errou 3x! Compre uma key com o usuÃ¡rio: 244hzkj")
		else
			wait(2)
			result.Text = "Tentativas restantes: " .. (maxAttempts - attempts) .. "\nKey nÃ£o reconhecida ou HWID incorreto."
		end
	end
end)
